{% extends "layout.html" %}
{% block javascript %}
<!-- call super() to make sure any other needed javascript is loaded -->
{{ super() }}
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
	function DisplayMapAndMarkers() {
		// init map
		var myOptions = {
            center    : new google.maps.LatLng(0, 0),
            zoom      : 1,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        //alert(document.getElementById("map_canvas"));
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
		// gonna try jinja here to get the values
		var geo_pos_array = new Array();
		var pos_x, pos_y, mLatLng, mMarker;
		{% for position in entry.Markers %}
			pos_x = {{ position[0] }};
			pos_y = {{ position[1] }};
			// create the marker
			mLatLng = new google.maps.LatLng(pos_x, pos_y);
			mMarker = new google.maps.Marker({
				position : mLatLng,
				map 	 : map
			});
			// add listener for click event
			google.maps.event.addListener(mMarker, 'click', function(event) {
				// zoom to marker
				map.setZoom(8);
				map.panTo(event.latLng);
			});
		{% endfor %}
	}
</script>
{% endblock %}
{% block page %}
	{% if entry %}
		<!-- show the entry in a table structure -->
		<table border="1">
			<tr><td>
				Name:
			</td><td>
				{{ entry.Name }}
			</td></tr>
			<tr><td>
				Genus:
			</td><td>
				{{ entry.Genus }}
			</td></tr>
			<tr><td>
				Species:
			</td><td>
				{{ entry.Species }}
			</td></tr>
			<tr><td>
				Common Name:
			</td><td>
				{{ entry.Common_Name }}
			</td></tr>
		</table>
		<table border="1">
			<tr><td>
				Keywords:
			</td></tr>
			<tr>
				{% for keyword in entry.Keywords %}
					<td>{{ keyword }}</td>
				{% endfor %}
			</tr>
		</table>
		<table border="1">
			<tr><td>
				Geo-Keywords:
			</td></tr>
			<tr>
				{% for keyword in entry.GeoKeywords %}
					<td>{{ keyword }}</td>
				{% endfor %}
			</tr>
		</table>
		<table border="1">
				<tr><td>
					Big area for positioning info:
				</td></tr>
				<tr><td>
					<div id="map_canvas" style="width:400px; height:350px"></div>
					<script type="text/javascript">DisplayMapAndMarkers();</script>
				</td></tr>
		</table>
		<table border="1">
				<tr><td>
					Another big area for lifestages info:
				</td></tr>
				<tr><td>
					{{ entry.Lifestages }}
				</td></tr>
		</table>
		<table border="1">
			<tr><td>
				Owned By:
			</td><td>
				{{ entry.User }}
			</td></tr>
			<tr><td>
				Created:
			</td><td>
				{{ entry.Created }}
			</td></tr>
		</table>
	{% endif %}
	<br />
	<a href="{{url_for('index')}}">Index</a>
{% endblock %}