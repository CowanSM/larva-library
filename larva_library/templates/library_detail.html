{% extends "layout.html" %}
{% block javascript %}
    <!-- call super() to make sure any other needed javascript is loaded -->
    {{ super() }}

    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        function DisplayMapAndMarkers() {
            // init map
            var myOptions = {
                center    : new google.maps.LatLng(0, 0),
                zoom      : 1,
                mapTypeId : google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            
            poly = new google.maps.Polygon({ map: map, path: [], strokeColor: "#FF0000", fillColor: "#FF0000", strokeOpacity: 1.0, strokeWeight: 2, fillOpacity: 0.35 });

            {% for position in entry.markers %}
                poly.getPath().push(new google.maps.LatLng({{position[0]}}, {{position[1]}}));
            {% endfor %}
            
        }
    </script>
{% endblock %}

{% block page %}
    {% if entry %}
        <!-- show the entry in a table structure -->
        <table border="1">
            <tr><td>
                Name:
            </td><td>
                {{ entry.Name }}
            </td></tr>
            <tr><td>
                Genus:
            </td><td>
                {{ entry.Genus }}
            </td></tr>
            <tr><td>
                Species:
            </td><td>
                {{ entry.Species }}
            </td></tr>
            <tr><td>
                Common Name:
            </td><td>
                {{ entry.Common_Name }}
            </td></tr>
        </table>
        <table border="1">
            <tr><td>
                Keywords:
            </td></tr>
            <tr>
                {% for keyword in entry.Keywords %}
                    <td>{{ keyword }}</td>
                {% endfor %}
            </tr>
        </table>
        <table border="1">
            <tr><td>
                Geo-Keywords:
            </td></tr>
            <tr>
                {% for keyword in entry.GeoKeywords %}
                    <td>{{ keyword }}</td>
                {% endfor %}
            </tr>
        </table>
        <table border="1">
                <tr><td>
                    Big area for positioning info:
                </td></tr>
                <tr><td>
                    <div id="map_canvas" style="width:400px; height:350px"></div>
                    <script type="text/javascript">DisplayMapAndMarkers();</script>
                </td></tr>
        </table>
        <table border="1">
                <tr><td>
                    Another big area for lifestages info:
                </td></tr>
                <tr><td>
                    {{ entry.Lifestages }}
                </td></tr>
        </table>
        <table border="1">
            <tr><td>
                Owned By:
            </td><td>
                {{ entry.User }}
            </td></tr>
            <tr><td>
                Created:
            </td><td>
                {{ entry.Created }}
            </td></tr>
        </table>
    {% endif %}
    <br />
    <a href="{{url_for('index')}}">Home</a>
{% endblock %}